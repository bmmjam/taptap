<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>TapTap</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <div id="intro-screen">
      <h1>TapTap</h1>
      <p class="subtitle">Узнай своё эмоциональное состояние</p>
      <p class="hint">Тапай, води пальцем, делай что чувствуешь.<br>Когда будешь готов — нажми кнопку.</p>
      <button id="start-btn">Начать</button>
    </div>

    <div id="tap-screen" class="hidden">
      <canvas id="trail-canvas"></canvas>
      <div id="tap-area">
        <div id="face-container">
          <svg id="face" viewBox="0 0 200 200" width="200" height="200">
            <circle id="face-bg" cx="100" cy="100" r="95" fill="#FFD93D" stroke="#E8B830" stroke-width="3"/>
            <ellipse id="eye-left" cx="70" cy="82" rx="8" ry="10" fill="#333"/>
            <ellipse id="eye-right" cx="130" cy="82" rx="8" ry="10" fill="#333"/>
            <path id="mouth" d="M 60 125 Q 100 160 140 125" stroke="#333" stroke-width="4" fill="none" stroke-linecap="round"/>
          </svg>
          <div id="pulse-ring"></div>
        </div>
        <p id="tap-counter">0 тапов</p>
        <p class="hint" id="gyro-hint"></p>
      </div>
      <button id="done-btn">Готово</button>
    </div>

    <div id="result-screen" class="hidden">
      <div id="thinking" class="hidden">
        <svg id="thinking-face" viewBox="0 0 200 200" width="120" height="120">
          <circle cx="100" cy="100" r="95" fill="#FFD93D" stroke="#E8B830" stroke-width="3"/>
          <ellipse cx="70" cy="82" rx="8" ry="10" fill="#333"/>
          <ellipse cx="130" cy="82" rx="8" ry="10" fill="#333"/>
          <line x1="65" y1="130" x2="135" y2="130" stroke="#333" stroke-width="4" stroke-linecap="round"/>
        </svg>
        <p>Анализирую...</p>
      </div>
      <div id="result-card" class="hidden">
        <div id="result-emoji"></div>
        <h2 id="result-emotion"></h2>
        <p id="result-description"></p>
        <div id="result-advice">
          <h3>Что можно сделать:</h3>
          <ul id="advice-list"></ul>
        </div>
        <div id="result-stats"></div>
        <button id="group-btn">Общая обстановка</button>
        <button id="retry-btn" class="secondary">Попробовать ещё раз</button>
      </div>
    </div>

    <div id="group-screen" class="hidden">
      <h2 id="group-title">Обстановка в группе</h2>
      <div id="group-mood"></div>
      <div id="group-bars"></div>
      <div id="group-members"></div>
      <p id="group-count"></p>
      <button id="back-btn">Назад к результату</button>
      <button id="retry-btn-group" class="secondary">Попробовать ещё раз</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
