# ะกะฑะพั ะดะฐัะฐัะตัะฐ ะดะปั ะบะพััะตะบัะธัะพะฒะบะธ ะผะพะดะตะปะธ

## ะฆะตะปั

ะะพะปััะธัั ัะฐะทะผะตัะตะฝะฝัะน ะดะฐัะฐัะตั: **(ัะธัะธ ัะฐะฟะฐะฝะธั) โ (ัะตะฐะปัะฝะฐั ัะผะพัะธั)**.
Ground truth โ ะดะพััะพะฒะตัะฝะฐั ะผะตัะบะฐ ัะผะพัะธะธ ัะตะปะพะฒะตะบะฐ ะดะพ ัะพะณะพ, ะบะฐะบ ะพะฝ ัะฐะฟะฐะตั.

## ะคะปะพั ะฟะพะปัะทะพะฒะฐัะตะปั

```
[ะะฟัะพั SAM + ะฒัะฑะพั ัะผะพัะธะธ]  โ  [3-2-1 Countdown]  โ  [ะขะฐะฟ 6 ัะตะบ]  โ  [ะะตะทัะปััะฐั]  โ  [ะะฑัะฐัะฝะฐั ัะฒัะทั]
        โ                                                    โ                              โ
   survey_data                                          tap_features                   feedback_data
        โ                                                    โ                              โ
        โโโโโโโโโโโโโโโโโโโโโโโ session record โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                              user_id + timestamp
```

## ะะฟัะพั ะดะพ ัะฐะฟะฐ: SAM + ะฒัะฑะพั ัะผะพัะธะธ (~20-30 ัะตะบัะฝะด)

### SAM (Self-Assessment Manikin)

3 ะฒะธะทัะฐะปัะฝัะต ัะบะฐะปั (ะบะฐััะธะฝะบะธ-ัะตะปะพะฒะตัะบะธ, ะฝะต ัะตะบัั):

1. **Valence** (ัะพัะพัะพ โ ะฟะปะพัะพ) โ 5 ะฟัะฝะบัะพะฒ
2. **Arousal** (ะฒะพะทะฑัะถะดะตะฝะธะต โ ัะฟะพะบะพะนััะฒะธะต) โ 5 ะฟัะฝะบัะพะฒ
3. **Dominance** (ะบะพะฝััะพะปั โ ะฟะพะดะฐะฒะปะตะฝะฝะพััั) โ 5 ะฟัะฝะบัะพะฒ

ะะปััั SAM:
- ะะฐะฝะธะผะฐะตั 15-20 ัะตะบัะฝะด
- ะะฐะปะธะดะธัะพะฒะฐะฝ ะฒ ัะพัะฝัั ะธััะปะตะดะพะฒะฐะฝะธะน
- ะะธะทัะฐะปัะฝัะน โ ัะฐะฑะพัะฐะตั ะฑะตะท ัะทัะบะพะฒะพะณะพ ะฑะฐััะตัะฐ
- ะัะปะธัะฝะพ ะปะพะถะธััั ะฒ ะผะพะฑะธะปัะฝัะน UI

### ะััะผะพะน ะฒัะฑะพั ัะผะพัะธะธ

ะะพะฟัะพั: "ะงัะพ ัั ัะตะนัะฐั ััะฒััะฒัะตัั?"
ะัะฑะพั ะธะท 6 ัะผะพัะธะน (ัะตั ะถะต, ััะพ ะฒ ะฟัะธะปะพะถะตะฝะธะธ):
- ๐ค ะกััะตัั
- ๐คฉ ะญะฝะตัะณะธั
- ๐ ะกะฟะพะบะพะนััะฒะธะต
- ๐ ะขัะตะฒะพะณะฐ
- ๐ง ะคะพะบัั
- ๐ ะััััั

ะญัะพ ะดะฐัั ะธ ัะฐะทะผะตัะฝัั (SAM), ะธ ะบะฐัะตะณะพัะธะฐะปัะฝัั (discrete emotion) ะผะตัะบั.

## ะะฟัะพั ะฟะพัะปะต ัะฐะฟะฐ: ะพะฑัะฐัะฝะฐั ัะฒัะทั

1. **"ะะฐัะบะพะปัะบะพ ัะพัะฝะพ?"** โ 1-5 ะทะฒัะทะด (ะพัะตะฝะบะฐ ัะตะบััะตะน ะผะพะดะตะปะธ)
2. **"ะะฐะบะฐั ัะผะพัะธั ะฝะฐ ัะฐะผะพะผ ะดะตะปะต ะฑะปะธะถะต?"** โ ะฟะพะบะฐะทัะฒะฐัั ัะพะปัะบะพ ะตัะปะธ ะพัะตะฝะบะฐ < 4 (ะฒัะพัะพะน ะธััะพัะฝะธะบ ground truth)

## ะะตัะตัะฐะฟัะฒะฐะฝะธะต

ะะพะณะธัะพะฒะฐัั ะฟะฐััะธะฒะฝะพ (ะฝะพะผะตั ะฟะพะฟััะบะธ, ะผะตะฝัะปัั ะปะธ ัะตะทัะปััะฐั).
ะะปั ะดะฐัะฐัะตัะฐ ะธัะฟะพะปัะทะพะฒะฐัั **ัะพะปัะบะพ ะฟะตัะฒัะน ัะฐะฟ** ะฟะพัะปะต ะพะฟัะพัะฐ โ ะพะฝ ัะฐะผัะน ัะธัััะน.
ะะพะฒัะพัะฝัะต ัะฐะฟั โ ะดััะณะพะต ะฟะพะฒะตะดะตะฝะธะต (ัะตะปะพะฒะตะบ "ะฟะพะดัััะฐะธะฒะฐะตััั").

## ะคะพัะผะฐั ะดะฐะฝะฝัั (JSONL)

ะคะฐะนะป: `dataset.jsonl` โ ะพะดะฝะฐ JSON-ัััะพะบะฐ ะฝะฐ ัะตััะธั.

```json
{
  "user_id": 123456789,
  "user_name": "ะะฒะฐะฝ",
  "session_id": "uuid-v4",
  "attempt_number": 1,
  "timestamp": "2026-02-11T15:30:00Z",
  "survey": {
    "valence": 3,
    "arousal": 4,
    "dominance": 2,
    "self_reported_emotion": "stressed"
  },
  "tap_features": {
    "tapCount": 28,
    "frequency": 4.67,
    "avgPressure": 0.72,
    "avgArea": 1850,
    "avgInterval": 214,
    "intervalVariance": 0.35,
    "regularity": 0.65,
    "avgHold": 120,
    "trailDistance": 2400,
    "shakeIntensity": 8.5,
    "deviceTilt": 15.3
  },
  "model_prediction": "stressed",
  "feedback": {
    "accuracy_rating": 4,
    "corrected_emotion": null
  }
}
```

## ะฅัะฐะฝะตะฝะธะต

- JSONL ัะฐะนะป ะฝะฐ ัะตัะฒะตัะต (`dataset.jsonl`)
- Append-only โ ะบะฐะถะดะฐั ัะตััะธั ะดะพะฟะธััะฒะฐะตััั ะฒ ะบะพะฝะตั
- ะะธะฝะธะผัะผ ะดะปั ะพะฑััะตะฝะธั ML: ~200-300 ัะตััะธะน

## ะะตะฐะปะธะทะฐัะธั

### Frontend (webapp/app.js)

ะะพะฒัะต ัะบัะฐะฝั:
1. **Survey screen** โ ะฟะพัะปะต intro, ะฟะตัะตะด countdown. SAM ัะบะฐะปั + ะฒัะฑะพั ัะผะพัะธะธ.
2. **Feedback screen** โ ะฟะพัะปะต result. ะะตะนัะธะฝะณ ัะพัะฝะพััะธ + ะบะพััะตะบัะธั ัะผะพัะธะธ.

### Backend (bot/bot.py)

ะะพะฒัะน endpoint:
- `POST /api/dataset` โ ะฟัะธะฝะธะผะฐะตั ะฟะพะปะฝัั ัะตััะธั (survey + tap_features + feedback), ะดะพะฟะธััะฒะฐะตั ะฒ `dataset.jsonl`

### ะะพััะดะพะบ ัะบัะฐะฝะพะฒ

```
intro โ survey โ countdown โ tap โ result โ feedback โ (group / retry)
```
